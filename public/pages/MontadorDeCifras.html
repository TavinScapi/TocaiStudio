<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Montador de Cifras | TocaíStudio</title>
    <link rel="stylesheet" href="../css/montador.css">

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Fira+Code&display=swap"
        rel="stylesheet" />
    <script src="../js/montador.js" defer></script>
</head>

<body>
    <h1>Montador de Cifras</h1>
    <h2>Crie cifras no estilo Tocaí</h2>

    <div class="container">
        <section class="editor-section" aria-label="Editor de Cifras">
            <nav class="tab-buttons" role="tablist" aria-label="Abas do editor">
                <button class="tab-btn active" role="tab" aria-selected="true" tabindex="0" aria-controls="metadata"
                    id="tab-metadata" onclick="openTab('metadata', event)">
                    Música
                </button>
                <button class="tab-btn" role="tab" aria-selected="false" tabindex="-1" aria-controls="lyrics"
                    id="tab-lyrics" onclick="openTab('lyrics', event)">
                    Letra
                </button>
                <button class="tab-btn" role="tab" aria-selected="false" tabindex="-1" aria-controls="chords-tab"
                    id="tab-chords" onclick="openTab('chords-tab', event)">
                    Acordes
                </button>
                <button class="tab-btn" role="tab" aria-selected="false" tabindex="-1" aria-controls="tabs"
                    id="tab-tabs" onclick="openTab('tabs', event)">
                    Tablaturas
                </button>
            </nav>

            <article id="metadata" class="tab-content active" role="tabpanel" aria-labelledby="tab-metadata">
                <div class="form-group">
                    <label for="song-title">Título da Música</label>
                    <input type="text" id="song-title" placeholder="Digite o título da música" autocomplete="off" />
                </div>

                <div class="form-group">
                    <label for="artist">Artista/Banda</label>
                    <input type="text" id="artist" placeholder="Nome do artista ou banda" autocomplete="off" />
                </div>

                <div class="form-group">
                    <label for="song-key">Tom da Música</label>
                    <select id="song-key" aria-describedby="song-key-help">
                        <option value="">Selecione o tom</option>
                        <option value="C">C</option>
                        <option value="C#">C#</option>
                        <option value="D">D</option>
                        <option value="D#">D#</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="F#">F#</option>
                        <option value="G">G</option>
                        <option value="G#">G#</option>
                        <option value="A">A</option>
                        <option value="A#">A#</option>
                        <option value="B">B</option>
                    </select>
                    <small id="song-key-help">Tom principal da música</small>
                </div>

                <div class="form-group">
                    <label for="tuning">Afinação</label>
                    <select id="tuning" aria-describedby="tuning-help">
                        <option value="">Padrão (EADGBE)</option>
                        <option value="DADGBE">DADGBE (Dropped D)</option>
                        <option value="DADGAD">DADGAD</option>
                        <option value="DGDGBD">DGDGBD (Open G)</option>
                        <option value="CGCGCE">CGCGCE (Open C)</option>
                        <option value="EBEG#BE">EBEG#BE (Open E)</option>
                    </select>
                    <small id="tuning-help">Selecione a afinação da guitarra</small>
                </div>

                <div class="form-group">
                    <label for="capo">Capotraste</label>
                    <input type="text" id="capo" placeholder="Ex: 2ª casa" autocomplete="off" />
                </div>
            </article>

            <article id="lyrics" class="tab-content" role="tabpanel" aria-labelledby="tab-lyrics">
                <div class="form-group">
                    <label for="song-lyrics">Letra da Música</label>
                    <textarea id="song-lyrics" placeholder="Digite a letra da música aqui..." rows="10"></textarea>
                </div>

                <div class="btn-group" role="group" aria-label="Adicionar seções da letra">
                    <button class="btn" type="button" onclick="addSection('Intro')">
                        + Intro
                    </button>
                    <button class="btn" type="button" onclick="addSection('Verso')">
                        + Verso
                    </button>
                    <button class="btn" type="button" onclick="addSection('Refrão')">
                        + Refrão
                    </button>
                    <button class="btn" type="button" onclick="addSection('Ponte')">
                        + Ponte
                    </button>
                    <button class="btn" type="button" onclick="addSection('Solo')">
                        + Solo
                    </button>
                </div>
            </article>

            <article id="chords-tab" class="tab-content" role="tabpanel" aria-label="Editor de acordes"
                aria-labelledby="tab-chords">
                <div id="chords-editor" spellcheck="false" aria-multiline="true" aria-label="Área de edição de acordes"
                    tabindex="0">
                    <!-- Linhas de acordes inseridas via JS -->
                </div>
                <button class="btn" id="save-chords-btn" aria-label="Salvar acordes na letra" type="button">
                    Salvar Acordes
                </button>
            </article>

            <article id="tabs" class="tab-content" role="tabpanel" aria-labelledby="tab-tabs">
                <div id="tab-lines-editor" spellcheck="false" style="
            background: #fff;
            padding: 1rem;
            border: 1px solid #00bcd4;
            border-radius: 6px;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre;
            font-family: 'Fira Code', monospace;
            color: #444;
          " aria-label="Editor linha a linha de tablaturas" tabindex="0">
                    <!-- Letras + editor de tablaturas via JS -->
                </div>

                <label for="tab-input"><strong>Editor de Tablatura</strong></label>
                <textarea id="tab-input" style="
            width: 100%;
            height: 180px;
            font-family: 'Fira Code', monospace;
            white-space: pre;
            border: 1px solid #00bcd4;
            border-radius: 6px;
            padding: 0.5rem;
          " aria-label="Editor manual de tablaturas" placeholder="Cole ou digite a tablatura aqui" rows="10">e|-----------------------------------------------------------------------|
B|-----------------------------------------------------------------------|
G|-----------------------------------------------------------------------|
D|-----------------------------------------------------------------------|
A|-----------------------------------------------------------------------|
E|-----------------------------------------------------------------------|</textarea>

                <div class="btn-group" style="margin-top: 0.5rem;">
                    <button class="btn" type="button" onclick="copiarTab()">
                        Copiar
                    </button>
                    <button class="btn" type="button" onclick="limparTab()">
                        Limpar
                    </button>
                </div>

                <button class="btn" id="save-tabs-btn" style="margin-top: 1rem;" type="button">
                    Salvar Tablaturas na Letra
                </button>
            </article>
        </section>

        <aside class="preview-section" aria-label="Pré-visualização da cifra">
            <h3>Pré-visualização da Cifra</h3>
            <div id="cifra-preview" class="preview" tabindex="0" aria-live="polite"></div>

            <div class="btn-group" style="margin-top: 1rem;">
                <button class="btn btn-accent" type="button" onclick="copyCifra()">
                    Copiar Cifra
                </button>
                <button class="btn" type="button" onclick="clearAll()">
                    Limpar Tudo
                </button>
            </div>

            <div id="status" class="status" role="alert" aria-live="assertive"></div>
        </aside>
    </div>
</body>

</html>